import{r as d,O as $,k as _,t as N,Q,aj as q,S as L,x as C,s as A,j as g}from"./app-BgPJxW1M.js";import{a as K,c as Y}from"./index-C9HaU8Wt.js";function z(e){const t=d.useRef(null),a=d.useRef(void 0),i=d.useCallback(r=>{if(typeof e=="function"){const l=e,n=l(r);return()=>{typeof n=="function"?n():l(null)}}else if(e)return e.current=r,()=>{e.current=null}},[e]);return d.useMemo(()=>({get current(){return t.current},set current(r){t.current=r,a.current&&(a.current(),a.current=void 0),r!=null&&(a.current=i(r))}}),[i])}function oe(e,t,a){let i=d.useRef(t),r=$(()=>{a&&a(i.current)});d.useEffect(()=>{var l;let n=e==null||(l=e.current)===null||l===void 0?void 0:l.form;return n==null||n.addEventListener("reset",r),()=>{n==null||n.removeEventListener("reset",r)}},[e,r])}function se(e){const t=_(),a=t==null?void 0:t.labelPlacement;return d.useMemo(()=>{var i,r;const l=(r=(i=e.labelPlacement)!=null?i:a)!=null?r:"inside";return l==="inside"&&!e.label?"outside":l},[e.labelPlacement,a,e.label])}var G=N({base:"flex flex-col gap-2 items-start"});const M={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},B={...M,customError:!0,valid:!1},b={isInvalid:!1,validationDetails:M,validationErrors:[]},F=d.createContext({}),w="__formValidationState"+Date.now();function de(e){if(e[w]){let{realtimeValidation:t,displayValidation:a,updateValidation:i,resetValidation:r,commitValidation:l}=e[w];return{realtimeValidation:t,displayValidation:a,updateValidation:i,resetValidation:r,commitValidation:l}}return H(e)}function H(e){let{isInvalid:t,validationState:a,name:i,value:r,builtinValidation:l,validate:n,validationBehavior:s="aria"}=e;a&&(t||(t=a==="invalid"));let o=t!==void 0?{isInvalid:t,validationErrors:[],validationDetails:B}:null,u=d.useMemo(()=>{if(!n||r==null)return null;let c=J(n,r);return D(c)},[n,r]);l!=null&&l.validationDetails.valid&&(l=void 0);let f=d.useContext(F),v=d.useMemo(()=>i?Array.isArray(i)?i.flatMap(c=>I(f[c])):I(f[i]):[],[f,i]),[O,T]=d.useState(f),[S,y]=d.useState(!1);f!==O&&(T(f),y(!1));let V=d.useMemo(()=>D(S?[]:v),[S,v]),P=d.useRef(b),[p,E]=d.useState(b),m=d.useRef(b),k=()=>{if(!U)return;x(!1);let c=u||l||P.current;h(c,m.current)||(m.current=c,E(c))},[U,x]=d.useState(!1);return d.useEffect(k),{realtimeValidation:o||V||u||l||b,displayValidation:s==="native"?o||V||p:o||V||u||l||p,updateValidation(c){s==="aria"&&!h(p,c)?E(c):P.current=c},resetValidation(){let c=b;h(c,m.current)||(m.current=c,E(c)),s==="native"&&x(!1),y(!0)},commitValidation(){s==="native"&&x(!0),y(!0)}}}function I(e){return e?Array.isArray(e)?e:[e]:[]}function J(e,t){if(typeof e=="function"){let a=e(t);if(a&&typeof a!="boolean")return I(a)}return[]}function D(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:B}:null}function h(e,t){return e===t?!0:!!e&&!!t&&e.isInvalid===t.isInvalid&&e.validationErrors.length===t.validationErrors.length&&e.validationErrors.every((a,i)=>a===t.validationErrors[i])&&Object.entries(e.validationDetails).every(([a,i])=>t.validationDetails[a]===i)}function ue(...e){let t=new Set,a=!1,i={...M};for(let n of e){var r,l;for(let s of n.validationErrors)t.add(s);a||(a=n.isInvalid);for(let s in i)(r=i)[l=s]||(r[l]=n.validationDetails[s])}return i.valid=!a,{isInvalid:a,validationErrors:[...t],validationDetails:i}}function ce(e,t,a){let{validationBehavior:i,focus:r}=e;Q(()=>{if(i==="native"&&(a!=null&&a.current)&&!a.current.disabled){let o=t.realtimeValidation.isInvalid?t.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";a.current.setCustomValidity(o),a.current.hasAttribute("title")||(a.current.title=""),t.realtimeValidation.isInvalid||t.updateValidation(X(a.current))}});let l=$(()=>{t.resetValidation()}),n=$(o=>{var u;t.displayValidation.isInvalid||t.commitValidation();let f=a==null||(u=a.current)===null||u===void 0?void 0:u.form;if(!o.defaultPrevented&&a&&f&&Z(f)===a.current){var v;r?r():(v=a.current)===null||v===void 0||v.focus(),q("keyboard")}o.preventDefault()}),s=$(()=>{t.commitValidation()});d.useEffect(()=>{let o=a==null?void 0:a.current;if(!o)return;let u=o.form;return o.addEventListener("invalid",n),o.addEventListener("change",s),u==null||u.addEventListener("reset",l),()=>{o.removeEventListener("invalid",n),o.removeEventListener("change",s),u==null||u.removeEventListener("reset",l)}},[a,n,s,l,i])}function W(e){let t=e.validity;return{badInput:t.badInput,customError:t.customError,patternMismatch:t.patternMismatch,rangeOverflow:t.rangeOverflow,rangeUnderflow:t.rangeUnderflow,stepMismatch:t.stepMismatch,tooLong:t.tooLong,tooShort:t.tooShort,typeMismatch:t.typeMismatch,valueMissing:t.valueMissing,valid:t.valid}}function X(e){return{isInvalid:!e.validity.valid,validationDetails:W(e),validationErrors:e.validationMessage?[e.validationMessage]:[]}}function Z(e){for(let t=0;t<e.elements.length;t++){let a=e.elements[t];if(!a.validity.valid)return a}return null}function ee(e){let{id:t,label:a,"aria-labelledby":i,"aria-label":r,labelElementType:l="label"}=e;t=L(t);let n=L(),s={};a&&(i=i?`${n} ${i}`:n,s={id:n,htmlFor:l==="label"?t:void 0});let o=K({id:t,"aria-label":r,"aria-labelledby":i});return{labelProps:s,fieldProps:o}}function fe(e){let{description:t,errorMessage:a,isInvalid:i,validationState:r}=e,{labelProps:l,fieldProps:n}=ee(e),s=C([!!t,!!a,i,r]),o=C([!!t,!!a,i,r]);return n=A(n,{"aria-describedby":[s,o,e["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:l,fieldProps:n,descriptionProps:{id:s},errorMessageProps:{id:o}}}var R=Symbol("default");function te(e,t){let a=d.useContext(e);if(t===null)return null;if(a&&typeof a=="object"&&"slots"in a&&a.slots){let i=new Intl.ListFormat().format(Object.keys(a.slots).map(l=>`"${l}"`));if(!t&&!a.slots[R])throw new Error(`A slot prop is required. Valid slot names are ${i}.`);let r=t||R;if(!a.slots[r])throw new Error(`Invalid slot "${t}". Valid slot names are ${i}.`);return a.slots[r]}return a}function ae(e,t,a){let i=te(a,e.slot)||{},{ref:r,...l}=i,n=z(d.useMemo(()=>Y(t,r),[t,r])),s=A(l,e);return"style"in l&&l.style&&"style"in e&&e.style&&(typeof l.style=="function"||typeof e.style=="function"?s.style=o=>{let u=typeof l.style=="function"?l.style(o):l.style,f={...o.defaultStyle,...u},v=typeof e.style=="function"?e.style({...o,defaultStyle:f}):e.style;return{...f,...v}}:s.style={...l.style,...e.style}),[s,n]}var j=d.createContext(null);d.forwardRef(function(t,a){[t,a]=ae(t,a,j);let{validationErrors:i,validationBehavior:r="native",children:l,className:n,...s}=t;const o=d.useMemo(()=>G({className:n}),[n]);return g.jsx("form",{noValidate:r!=="native",...s,ref:a,className:o,children:g.jsx(j.Provider,{value:{...t,validationBehavior:r},children:g.jsx(F.Provider,{value:i??{},children:l})})})});export{fe as $,j as F,oe as a,ce as b,b as c,w as d,ue as e,M as f,de as g,se as h,ee as i,te as u};
