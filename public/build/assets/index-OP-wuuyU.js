import{r as n}from"./app-DQKbtpUE.js";import{u as E}from"./index-GIThBFd9.js";function b(){const t=()=>()=>{};return n.useSyncExternalStore(t,()=>!0,()=>!1)}function x(t={}){const{onLoad:o,onError:s,ignoreFallback:g,src:u,crossOrigin:a,srcSet:i,sizes:c,loading:l}=t,d=b(),e=n.useRef(d?new Image:null),[S,f]=n.useState("pending");n.useEffect(()=>{e.current&&(e.current.onload=r=>{m(),f("loaded"),o==null||o(r)},e.current.onerror=r=>{m(),f("failed"),s==null||s(r)})},[e.current]);const m=()=>{e.current&&(e.current.onload=null,e.current.onerror=null,e.current=null)},p=n.useCallback(()=>{if(!u)return"pending";if(g)return"loaded";const r=new Image;return r.src=u,a&&(r.crossOrigin=a),i&&(r.srcset=i),c&&(r.sizes=c),l&&(r.loading=l),e.current=r,r.complete&&r.naturalWidth?"loaded":"loading"},[u,a,i,c,o,s,l]);return E(()=>{d&&f(p())},[d,p]),g?"loaded":S}export{x as u};
