import{q as C,n as i,j as e,Y as P,p as S}from"./app-DrNWwami.js";import{S as D}from"./Icons-CfEnB7jo.js";import{A as E}from"./AuthenticatedLayout-CyBIuHTu.js";import"./index-fdPvxAHf.js";import{F}from"./index-CXrs58QI.js";import{S as x}from"./sweetalert2.all-v7t1F3Wn.js";import{b as f}from"./useDialog-Di36_uni.js";import{i as r}from"./chunk-6MDMHKHV-DmO_v9hH.js";import{t as G,a as A,b as l,c as M,d as R,e as o}from"./chunk-F3UDT23P-J0o8n-Lq.js";import{p as O}from"./chunk-O5I3QTYU-7dC2ieHk.js";import{m as k,a as L,b as I}from"./chunk-3BLMMOBU-D-PHTKql.js";import{a as T,m as B}from"./chunk-IGSAU2ZA-D8Odi8au.js";import"./ApplicationLogo-D84LrN-L.js";import"./useMenuTriggerState-C7FIa5eO.js";import"./index-Du4sZGOB.js";import"./chunk-LGMZDQT5-DN_zI6e3.js";import"./chunk-A6PX3NG3-BBOBAK1C.js";import"./index-D1ubkcav.js";import"./iconBase-drxDCob1.js";import"./chunk-SLABUSGS-CD9Ro_xR.js";import"./chunk-MZRCPRP2-DT8drFo4.js";import"./LiveAnnouncer-6wq0YUFY.js";import"./index-BgjJgvBe.js";import"./index-X92CTFGl.js";function pe({auth:j}){const{props:{guests:b}}=C(),[p,g]=i.useState(""),d=b.slice().sort((s,t)=>s.name.localeCompare(t.name)).filter(s=>s.name.toLowerCase().includes(p.toLowerCase())),[v,_]=i.useState(!1),[a,V]=i.useState(null),w=async()=>{if(d.length===0){x.fire({icon:"warning",title:"No Records",text:"There are no guests to export."});return}try{const s=await S.get("/generate-report",{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([s.data])),m=document.createElement("a");m.href=t,m.setAttribute("download","Guests_Report.pdf"),document.body.appendChild(m),m.click(),x.fire({icon:"success",title:"PDF Report Generated",text:"The PDF report has been successfully generated and downloaded."})}catch(s){console.error("Error generating PDF report:",s),x.fire({icon:"error",title:"Error",text:"Failed to generate PDF report. Please try again later."})}},u=()=>{_(!1)},[c,N]=i.useState(1),n=10,y=Math.ceil(d.length/n),h=i.useMemo(()=>{const s=(c-1)*n,t=s+n;return d.slice(s,t)},[c,n,d]);return e.jsxs(E,{user:j.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Registered Guests"}),children:[e.jsx(P,{title:"Guests"}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex justify-between gap-3 items-end mb-4",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx(f,{color:"secondary",variant:"flat",onPress:w,className:"mt-6",startContent:e.jsx(F,{}),children:"Export to PDF"})}),e.jsx(r,{variant:"bordered",value:p,onChange:s=>g(s.target.value),placeholder:"Search by name",className:"w-full sm:max-w-[35%]",startContent:e.jsx(D,{className:"text-black/50 mb-0.5 dark:text-white/90 text-slate-400 pointer-events-none flex-shrink-0"})})]})}),e.jsxs(G,{"aria-label":"Guests Table",bottomContent:e.jsx("div",{className:"flex w-full justify-center",children:e.jsx(O,{isCompact:!0,showControls:!0,showShadow:!0,color:"secondary",page:c,total:y,onChange:s=>N(s)})}),classNames:{wrapper:"min-h-[222px]"},children:[e.jsxs(A,{children:[e.jsx(l,{className:"text-success",children:"#"}),e.jsx(l,{children:"NAME"}),e.jsx(l,{children:"EMAIL"}),e.jsx(l,{children:"PHONE"}),e.jsx(l,{children:"COMPANY"}),e.jsx(l,{children:"ADDRESS"})]}),e.jsx(M,{emptyContent:"No guests found",items:h,children:h.map((s,t)=>e.jsxs(R,{children:[e.jsx(o,{className:"text-success",children:(c-1)*n+t+1}),e.jsx(o,{children:s.name}),e.jsx(o,{children:s.email}),e.jsx(o,{children:s.phone}),e.jsx(o,{children:s.company}),e.jsx(o,{children:s.address})]},s.id))})]})]})}),e.jsx(k,{isDismissable:!1,isOpen:v,onOpenChange:u,hideCloseButton:!0,backdrop:"blur",children:e.jsx(L,{children:()=>e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"flex flex-col gap-1",children:"Guest Details"}),e.jsx(I,{children:a&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(r,{label:"Name",variant:"bordered",value:a.name}),e.jsx(r,{label:"Email",variant:"bordered",value:a.email}),e.jsx(r,{label:"Phone",variant:"bordered",value:a.phone??void 0}),e.jsx(r,{label:"Company",variant:"bordered",value:a.company??void 0}),e.jsx(r,{label:"Address",variant:"bordered",value:a.address??void 0})]})}),e.jsx(B,{children:e.jsx(f,{color:"primary",onPress:u,children:"Close"})})]})})})]})}export{pe as default};
