import{q as O,m as d,j as e,Y as T}from"./app-sfwLsk0p.js";import{S as B,E as R,D as k}from"./Icons-BFU2xsjq.js";import{A as U,d as f}from"./AuthenticatedLayout-Bq1yJva_.js";import{S as c}from"./sweetalert2.all-DZraTCJs.js";import{i as l}from"./chunk-6MDMHKHV-BuMiEWWw.js";import{t as Y,a as z,b as t,c as F,d as L,e as n}from"./chunk-F3UDT23P-Do-G9KkS.js";import{p as V}from"./chunk-O5I3QTYU-DeHZLMQE.js";import{t as _}from"./chunk-7ZZXWEXF-B2M0sJGD.js";import{b as u}from"./useDialog-Be6D45yT.js";import{m as q,a as H,b as J}from"./chunk-3BLMMOBU-B5vVg6nV.js";import{m as K,a as Q}from"./chunk-IGSAU2ZA-BQllTye2.js";import"./ApplicationLogo-B1EZSp5j.js";import"./useMenuTriggerState-DZVnoS28.js";import"./index-CJQkXQsE.js";import"./chunk-A6PX3NG3-UYdNY6nu.js";import"./index-fNNSobJZ.js";import"./index-CtF2BjtO.js";function xe({auth:y}){const{props:{guests:v}}=O(),[j,C]=d.useState(""),m=v.slice().sort((s,a)=>s.name.localeCompare(a.name)).filter(s=>s.name.toLowerCase().includes(j.toLowerCase())),[N,b]=d.useState(!1),[w,E]=d.useState(null),[r,g]=d.useState({name:"",email:"",phone:"",company:"",id_type:"",id_number:"",address:""}),I=s=>{c.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&f.Inertia.delete(route("guest.destroy",{id:s}),{onSuccess:()=>{c.fire("Deleted!","The guest has been deleted.","success")},onError:()=>{c.fire("Error!","An error occurred while deleting the guest.","error")}})})},S=s=>{E(s),g({name:s.name,email:s.email||"",phone:s.phone||"",company:s.company||"",id_type:s.id_type||"",id_number:s.id_number||"",address:s.address||""}),b(!0)},x=()=>{b(!1)},o=s=>{const{name:a,value:M}=s.target;g(G=>({...G,[a]:M}))},D=()=>{f.Inertia.put(route("guest.update",{id:w.id}),r,{onSuccess:()=>{c.fire("Updated!","The guest has been updated successfully.","success"),x(),f.Inertia.reload()},onError:s=>{c.fire("Error!","An error occurred while updating the guest.","error")}})},[h,A]=d.useState(1),i=10,P=Math.ceil(m.length/i),p=d.useMemo(()=>{const s=(h-1)*i,a=s+i;return m.slice(s,a)},[h,i,m]);return e.jsxs(U,{user:y.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Registered Guests"}),children:[e.jsx(T,{title:"Registered Guests"}),e.jsx("div",{className:"py-8 px-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex flex-col gap-4",children:e.jsx("div",{className:"flex justify-end gap-3 items-end mb-4",children:e.jsx(l,{variant:"bordered",value:j,onChange:s=>C(s.target.value),placeholder:"Search by name",className:"w-full sm:max-w-[35%]",startContent:e.jsx(B,{className:"text-black/50 mb-0.5 dark:text-white/90 text-slate-400 pointer-events-none flex-shrink-0"})})})}),e.jsxs(Y,{"aria-label":"Guests Table",bottomContent:e.jsx("div",{className:"flex w-full justify-center",children:e.jsx(V,{isCompact:!0,showControls:!0,showShadow:!0,color:"secondary",page:h,total:P,onChange:s=>A(s)})}),classNames:{wrapper:"min-h-[222px]"},topContent:e.jsx("div",{className:"flex justify-start items-center",children:e.jsxs("p",{className:"text-sm italic text-gray-700",children:["showing ",p.length," of"," ",m.length," guests"]})}),children:[e.jsxs(z,{children:[e.jsx(t,{className:"text-success",children:"#"}),e.jsx(t,{children:"NAME"}),e.jsx(t,{children:"EMAIL"}),e.jsx(t,{children:"PHONE"}),e.jsx(t,{children:"COMPANY"}),e.jsx(t,{children:"ID TYPE"}),e.jsx(t,{children:"ID NUMBER"}),e.jsx(t,{children:"ADDRESS"}),e.jsx(t,{children:"Actions"})]}),e.jsx(F,{emptyContent:"No guests found",items:p,children:p.map((s,a)=>e.jsxs(L,{children:[e.jsx(n,{className:"text-success",children:(h-1)*i+a+1}),e.jsx(n,{children:s.name}),e.jsx(n,{children:s.email||"--"}),e.jsx(n,{children:s.phone||"--"}),e.jsx(n,{children:s.company}),e.jsx(n,{children:s.id_type||"--"}),e.jsx(n,{children:s.id_number||"--"}),e.jsx(n,{children:s.address||"--"}),e.jsx(n,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(_,{content:"Edit",children:e.jsx(u,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>S(s),children:e.jsx(R,{className:"text-lg text-default-400"})})}),e.jsx(_,{content:"Delete",children:e.jsx(u,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>I(s.id),children:e.jsx(k,{className:"text-lg text-danger"})})})]})})]},s.id))})]})]})}),e.jsx(q,{isDismissable:!1,isOpen:N,onOpenChange:x,hideCloseButton:!0,size:"xl",backdrop:"blur",children:e.jsx(H,{children:()=>e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"flex gap-1",children:"Edit Guest"}),e.jsx(J,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(l,{label:"Name",name:"name",variant:"bordered",value:r.name,onChange:o}),e.jsx(l,{label:"Email",name:"email",variant:"bordered",value:r.email,onChange:o}),e.jsx(l,{label:"Phone",name:"phone",variant:"bordered",value:r.phone,onChange:o}),e.jsx(l,{label:"Company",name:"company",variant:"bordered",value:r.company,onChange:o}),e.jsx(l,{label:"ID Type",name:"id_type",variant:"bordered",value:r.id_type,onChange:o}),e.jsx(l,{label:"ID Number",name:"id_number",variant:"bordered",value:r.id_number,onChange:o}),e.jsx(l,{label:"Address",name:"address",variant:"bordered",value:r.address,onChange:o})]})}),e.jsxs(Q,{children:[e.jsx(u,{color:"danger",variant:"light",onPress:x,children:"Cancel"}),e.jsx(u,{color:"primary",onPress:D,children:"Update"})]})]})})})]})}export{xe as default};
