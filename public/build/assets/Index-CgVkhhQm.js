import{r as u,m as x,j as e,Y as v}from"./app-C3I58QEU.js";import{A as y}from"./AuthenticatedLayout-Dyi7qL2q.js";import{S as D,t as S,a as k,b as r,c as I,d as T,e as a,D as A}from"./Icons-siQ5vABY.js";import{S as c}from"./sweetalert2.all-CryjmzKb.js";import{d as h}from"./index-DyBkz49z.js";import{d as G}from"./chunk-CEX5JYEG-BGixdNbQ.js";import{i as P}from"./chunk-ZH5EUE66-Bwfgp21H.js";import{p as B}from"./chunk-F7XGZDO5-lwhn5Pya.js";import{t as E}from"./chunk-NQWEZNNL-yqLg5ZYE.js";import"./ApplicationLogo-Bv_cAsTM.js";import"./chunk-3XT5V4LF-BhT7jySs.js";import"./index-7XyTjIaX.js";import"./VisuallyHidden-CF5qibUD.js";import"./chunk-6NL67ZRH-DzVADF9q.js";import"./useControlledState-BLDE1xEx.js";import"./index-C-PhQ9b9.js";import"./chunk-HUKVTWEI-CKfg3EFR.js";import"./useField-ByQS6DqN.js";import"./LiveAnnouncer-DTRDugEU.js";import"./chunk-7F3ZLNJ6-CNp2Ttxe.js";import"./useFilter-qsb5oN_o.js";import"./chunk-VGNVQLL4-BHOb9Aq0.js";import"./index-X92CTFGl.js";function ne({auth:p,guestLogs:f}){const[d,j]=u.useState(""),[o,_]=u.useState({start:null,end:null}),b=t=>{c.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&h.Inertia.delete(route("guest.log.destroy",{guestId:t}),{onSuccess:()=>{c.fire("Deleted!","The guest has been deleted.","success"),h.Inertia.reload()},onError:()=>{c.fire("Error!","An error occurred while deleting the guest.","error")}})})},g=t=>{const s=t.guest.name.toLowerCase().includes(d.toLowerCase()),N=(!o.start||new Date(t.created_at)>=new Date(o.start))&&(!o.end||new Date(t.created_at)<=new Date(o.end));return s&&N},i=f.filter(g),[l,w]=x.useState(1),n=15,C=Math.ceil(i.length/n),m=x.useMemo(()=>{const t=(l-1)*n,s=t+n;return i.slice(t,s)},[l,n,i]);return e.jsxs(y,{user:p.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Guest Logs"}),children:[e.jsx(v,{title:"Guests Logs"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-end gap-2 mb-4",children:[e.jsx(P,{variant:"bordered",placeholder:"Search by guest name",className:"w-full sm:max-w-[35%]",startContent:e.jsx(D,{className:"text-black/50 mb-0.5 dark:text-white/90 text-slate-400 pointer-events-none flex-shrink-0"}),value:d,onChange:t=>j(t.target.value)}),e.jsx(G,{label:"Filter by Date",labelPlacement:"top",className:"max-w-xs",variant:"bordered",visibleMonths:2,onChange:t=>_(t)})]}),e.jsxs(S,{selectionMode:"single","aria-label":"Guests Table",bottomContent:e.jsx("div",{className:"flex w-full justify-center",children:e.jsx(B,{isCompact:!0,showControls:!0,showShadow:!0,color:"secondary",page:l,total:C,onChange:t=>w(t)})}),classNames:{wrapper:"min-h-[222px]"},children:[e.jsxs(k,{children:[e.jsx(r,{className:"text-success",children:"#"}),e.jsx(r,{children:"Guest ID"}),e.jsx(r,{children:"Guest Name"}),e.jsx(r,{children:"Purpose of Visit"}),e.jsx(r,{children:"Check In"}),e.jsx(r,{children:"Check Out"}),e.jsx(r,{children:"Actions"})]}),e.jsx(I,{emptyContent:"No guests found.",items:m,children:m.map((t,s)=>e.jsxs(T,{children:[e.jsx(a,{className:"text-success",children:(l-1)*n+s+1}),e.jsx(a,{children:t.guest_id}),e.jsx(a,{children:t.guest.name}),e.jsx(a,{children:t.purpose_of_visit}),e.jsx(a,{children:t.check_in_time}),e.jsx(a,{children:t.check_out_time}),e.jsx(a,{children:e.jsx("div",{className:"relative flex items-center justify-center gap-2 text-lg cursor-pointer active:opacity-50",children:e.jsx(E,{showArrow:!0,color:"danger",content:"Delete",children:e.jsx("span",{className:"text-primary cursor-pointer active:opacity-50",children:e.jsx(A,{className:"text-danger",onClick:()=>b(t.id)})})})})})]},t.id))})]})]})})})]})}export{ne as default};
