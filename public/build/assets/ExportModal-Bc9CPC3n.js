import{X as u,j as e,Z as c}from"./app-BOhBQsMj.js";function m({show:i,onClose:n}){const{data:r,setData:l}=u({format:"xlsx",start_date:"",end_date:""}),p=async s=>{s.preventDefault();try{const t=await axios({method:"get",url:route("guests.export"),params:r,responseType:"blob"}),a=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=a;const d=t.headers["content-disposition"]?t.headers["content-disposition"].split("filename=")[1].replace(/"/g,""):`guests-report.${r.format}`;o.setAttribute("download",d),document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(a),c({title:"Export Successful",description:`Guests report downloaded as ${d}`,color:"success",timeout:5e3}),n()}catch(t){console.error("Export failed:",t);let a="Export failed";t.response?a=t.response.data.message||t.response.statusText||`Server error: ${t.response.status}`:t.request&&(a="Network error - no response received"),c({title:"Export Failed",description:a,color:"danger",timeout:8e3})}};return i?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Export Guests Report"}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Format"}),e.jsxs("select",{className:"w-full border rounded p-2",value:r.format,onChange:s=>l("format",s.target.value),children:[e.jsx("option",{value:"xlsx",children:"Excel (.xlsx)"}),e.jsx("option",{value:"csv",children:"CSV (.csv)"}),e.jsx("option",{value:"pdf",children:"PDF (.pdf)"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Date Range (Optional)"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",className:"border rounded p-2 flex-1",value:r.start_date,onChange:s=>l("start_date",s.target.value)}),e.jsx("input",{type:"date",className:"border rounded p-2 flex-1",value:r.end_date,onChange:s=>l("end_date",s.target.value)})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-300 rounded",onClick:n,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Export"})]})]})]})}):null}export{m as default};
