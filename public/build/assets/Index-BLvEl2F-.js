import{n as D,r as n,P as E,ab as I,aa as y,j as e,Y as N,b as S,c as U,d as k}from"./app-Ct3ERNzC.js";import{A as $}from"./AuthenticatedLayout-tK6ZKsb-.js";import{D as R}from"./Icons-BYHrslzk.js";import{S as h}from"./sweetalert2.all-CoiMzX7B.js";import{u as v}from"./index-VCvdE-PY.js";import{m as A,a as B}from"./chunk-IGSAU2ZA-C11KBfMy.js";import{b as j}from"./chunk-GT2IF6NJ-BRO8cMC9.js";import{t as F,a as M,b as f,c as Y,d as z,e as m}from"./chunk-F3UDT23P-BP0lPFoj.js";import{t as T}from"./chunk-7ZZXWEXF-uFrppJSz.js";import{i as W}from"./chunk-6MDMHKHV-CucbeUAk.js";import"./ApplicationLogo-BkijEuoy.js";import"./useMenuTriggerState-Bz0_wv31.js";import"./index-ZTp55kaf.js";import"./chunk-A6PX3NG3-D2i8ITtp.js";import"./index-DH9RIZye.js";function K(b={}){const{id:_,defaultOpen:C,isOpen:l,onClose:O,onOpen:g,onChange:P=()=>{}}=b,i=v(g),d=v(O),[a,c]=D(l,C||!1,P),u=n.useId(),x=_||u,t=l!==void 0,p=n.useCallback(()=>{t||c(!1),d==null||d()},[t,d]),s=n.useCallback(()=>{t||c(!0),i==null||i()},[t,i]),r=n.useCallback(()=>{(a?p:s)()},[a,s,p]);return{isOpen:!!a,onOpen:s,onClose:p,onOpenChange:r,isControlled:t,getButtonProps:(o={})=>({...o,"aria-expanded":a,"aria-controls":x,onClick:E(o.onClick,r)}),getDisclosureProps:(o={})=>({...o,hidden:!a,id:x})}}function re({auth:b}){const{isOpen:_,onOpen:C,onClose:l}=K(),{data:O,setData:g,post:P,processing:i,reset:d}=I({file:null}),[a,c]=n.useState([]);n.useEffect(()=>{u()},[]);const u=async()=>{const s=await y.get("/media/all");c(s.data)},x=s=>{s.preventDefault(),P(route("media.upload"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{h.fire("Success","Media uploaded!","success"),u(),d(),l()},onError:()=>{h.fire("Error","Upload failed!","error")}})},t=async s=>{(await h.fire({title:"Delete media?",icon:"warning",showCancelButton:!0})).isConfirmed&&(await y.delete(`/media/${s}`),c(o=>o.filter(w=>w.id!==s)),h.fire("Deleted!","","success"))},p=s=>{const r=`/storage/${s.file_path}`;return s.file_type.includes("image")?e.jsx("img",{src:r,className:"h-16 rounded shadow"}):s.file_type.includes("video")?e.jsx("video",{src:r,className:"h-16",controls:!0,preload:"metadata",children:"Your browser does not support video."}):"Unsupported file"};return e.jsxs($,{user:b.user,header:e.jsx("h2",{className:"font-semibold text-xl",children:"Upload Media"}),children:[e.jsx(N,{title:"Upload Media"}),e.jsxs("div",{className:"py-8 px-4 max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex mb-4",children:e.jsx(j,{color:"primary",onPress:C,children:"Add"})}),e.jsxs(F,{"aria-label":"Uploaded media",children:[e.jsxs(M,{children:[e.jsx(f,{children:"File Path"}),e.jsx(f,{children:"PREVIEW"}),e.jsx(f,{children:"TYPE"}),e.jsx(f,{children:"SIZE (KB)"}),e.jsx(f,{children:"ACTION"})]}),e.jsx(Y,{emptyContent:"No media uploaded.",children:a.map(s=>e.jsxs(z,{children:[e.jsx(m,{className:"italic",children:s.file_path}),e.jsx(m,{children:p(s)}),e.jsx(m,{children:s.file_type}),e.jsx(m,{children:s.file_size}),e.jsx(m,{children:e.jsx(T,{content:"Delete",children:e.jsx(j,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>t(s.id),children:e.jsx(R,{className:"text-lg text-danger"})})})})]},s.id))})]}),e.jsx(S,{isOpen:_,onClose:l,children:e.jsx(U,{children:e.jsxs("form",{onSubmit:x,children:[e.jsx(A,{children:"Upload File"}),e.jsx(k,{children:e.jsx(W,{type:"file",accept:".jpg,.jpeg,.png,.webp,.mp4",onChange:s=>g("file",s.target.files[0])})}),e.jsxs(B,{children:[e.jsx(j,{type:"submit",color:"primary",isLoading:i,children:"Upload"}),e.jsx(j,{color:"danger",onPress:l,children:"Cancel"})]})]})})})]})]})}export{re as default};
