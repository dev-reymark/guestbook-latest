import{q as G,m as d,j as e,Y as T}from"./app-BKtn4RYs.js";import{S as B}from"./Icons-BMYiImzp.js";import{A as O,d as f}from"./AuthenticatedLayout-BGzReuXe.js";import{S as c}from"./sweetalert2.all-C4lJnEGT.js";import{i as l}from"./chunk-6MDMHKHV-DZh9xQkN.js";import{t as R,a as k,b as t,c as U,d as Y,e as r}from"./chunk-F3UDT23P-C0rARL7u.js";import{p as z}from"./chunk-O5I3QTYU-Dwr2-HB5.js";import{b as u}from"./useDialog-aHJarbcU.js";import{m as F,a as L,b as V}from"./chunk-3BLMMOBU-DGyQcWT0.js";import{m as q,a as H}from"./chunk-IGSAU2ZA-Bih1ps7e.js";import"./ApplicationLogo-C_7KyiTT.js";import"./useMenuTriggerState-DJVmRDPA.js";import"./index-BP-ejmFy.js";import"./chunk-A6PX3NG3-DLN5o8h0.js";import"./index-FMckFMUw.js";import"./index-9hbZf2vQ.js";import"./LiveAnnouncer-CPf1B4B4.js";function me({auth:g}){const{props:{guests:v}}=G(),[j,y]=d.useState(""),m=v.slice().sort((s,a)=>s.name.localeCompare(a.name)).filter(s=>s.name.toLowerCase().includes(j.toLowerCase())),[C,b]=d.useState(!1),[N,w]=d.useState(null),[n,_]=d.useState({name:"",email:"",phone:"",company:"",id_type:"",id_number:"",address:""}),S=s=>{c.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&f.Inertia.delete(route("guest.destroy",{id:s}),{onSuccess:()=>{c.fire("Deleted!","The guest has been deleted.","success")},onError:()=>{c.fire("Error!","An error occurred while deleting the guest.","error")}})})},E=s=>{w(s),_({name:s.name,email:s.email||"",phone:s.phone||"",company:s.company||"",id_type:s.id_type||"",id_number:s.id_number||"",address:s.address||""}),b(!0)},x=()=>{b(!1)},o=s=>{const{name:a,value:P}=s.target;_(M=>({...M,[a]:P}))},D=()=>{f.Inertia.put(route("guest.update",{id:N.id}),n,{onSuccess:()=>{c.fire("Updated!","The guest has been updated successfully.","success"),x(),f.Inertia.reload()},onError:s=>{c.fire("Error!","An error occurred while updating the guest.","error")}})},[h,I]=d.useState(1),i=10,A=Math.ceil(m.length/i),p=d.useMemo(()=>{const s=(h-1)*i,a=s+i;return m.slice(s,a)},[h,i,m]);return e.jsxs(O,{user:g.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Registered Guests"}),children:[e.jsx(T,{title:"Registered Guests"}),e.jsx("div",{className:"py-8 px-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex flex-col gap-4",children:e.jsx("div",{className:"flex justify-end gap-3 items-end mb-4",children:e.jsx(l,{variant:"bordered",value:j,onChange:s=>y(s.target.value),placeholder:"Search by name",className:"w-full sm:max-w-[35%]",startContent:e.jsx(B,{className:"text-black/50 mb-0.5 dark:text-white/90 text-slate-400 pointer-events-none flex-shrink-0"})})})}),e.jsxs(R,{"aria-label":"Guests Table",bottomContent:e.jsx("div",{className:"flex w-full justify-center",children:e.jsx(z,{isCompact:!0,showControls:!0,showShadow:!0,color:"secondary",page:h,total:A,onChange:s=>I(s)})}),classNames:{wrapper:"min-h-[222px]"},topContent:e.jsx("div",{className:"flex justify-start items-center",children:e.jsxs("p",{className:"text-sm italic text-gray-700",children:["showing ",p.length," of"," ",m.length," guests"]})}),children:[e.jsxs(k,{children:[e.jsx(t,{className:"text-success",children:"#"}),e.jsx(t,{children:"NAME"}),e.jsx(t,{children:"EMAIL"}),e.jsx(t,{children:"PHONE"}),e.jsx(t,{children:"COMPANY"}),e.jsx(t,{children:"ID TYPE"}),e.jsx(t,{children:"ID NUMBER"}),e.jsx(t,{children:"ADDRESS"}),e.jsx(t,{children:"Actions"})]}),e.jsx(U,{emptyContent:"No guests found",items:p,children:p.map((s,a)=>e.jsxs(Y,{children:[e.jsx(r,{className:"text-success",children:(h-1)*i+a+1}),e.jsx(r,{children:s.name}),e.jsx(r,{children:s.email||"--"}),e.jsx(r,{children:s.phone||"--"}),e.jsx(r,{children:s.company}),e.jsx(r,{children:s.id_type||"--"}),e.jsx(r,{children:s.id_number||"--"}),e.jsx(r,{children:s.address||"--"}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{color:"secondary",variant:"flat",size:"sm",onPress:()=>E(s),children:"Edit"}),e.jsx(u,{color:"danger",variant:"flat",size:"sm",onPress:()=>S(s.id),children:"Delete"})]})})]},s.id))})]})]})}),e.jsx(F,{isDismissable:!1,isOpen:C,onOpenChange:x,hideCloseButton:!0,size:"xl",backdrop:"blur",children:e.jsx(L,{children:()=>e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"flex gap-1",children:"Edit Guest"}),e.jsx(V,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(l,{label:"Name",name:"name",variant:"bordered",value:n.name,onChange:o}),e.jsx(l,{label:"Email",name:"email",variant:"bordered",value:n.email,onChange:o}),e.jsx(l,{label:"Phone",name:"phone",variant:"bordered",value:n.phone,onChange:o}),e.jsx(l,{label:"Company",name:"company",variant:"bordered",value:n.company,onChange:o}),e.jsx(l,{label:"ID Type",name:"id_type",variant:"bordered",value:n.id_type,onChange:o}),e.jsx(l,{label:"ID Number",name:"id_number",variant:"bordered",value:n.id_number,onChange:o}),e.jsx(l,{label:"Address",name:"address",variant:"bordered",value:n.address,onChange:o})]})}),e.jsxs(H,{children:[e.jsx(u,{color:"danger",variant:"light",onPress:x,children:"Cancel"}),e.jsx(u,{color:"primary",onPress:D,children:"Update"})]})]})})})]})}export{me as default};
